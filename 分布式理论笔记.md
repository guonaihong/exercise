分布式理论笔记

* 分享式锁

  * 中央服务器
  
    在多线程(进程)中操作共享资源，有线程(进程)锁，在分布式的环境是没有这样的锁机制。
    假如有共享资源，机器A,B,C都可以访问更新，如何保证是有序,可以搞授权服务，
    每次操作共享资源都需要授权，有权限就可以操作，当前只有一个服务得到权限，
    这里可以细化下，对权限进行读写分离:
	  如果发出一个读权限，在授权服务排队的请求立即返回，不需要授权。
	  如果是写权限，在授权服务排除的请求都等待，直至上一个写权限获得服务返回写权限。
    假如不用系统提供的方法有序地操作共享资源呢(可以想想，应该有很多种方法)？

  * 令牌环
  
    多个服务可以组成一个环，每个服务要操作共享资源时，向上游申请，获得就可操作，没有等待。
    可以环落到某服务时，该服务不需求操作，可以把令牌传到下一个服务里。

* 冲突更新

  如果数据库里有个变量的值是10，有两个客户端，需要对这个值进行+1操作，正常的结果是12。一般情况下没有问题。
  如果两个客户端读的值都是10，这时候的结果不是11。解决此类问题，一般用锁(这里的就锁read + write)，或者时间戳排序。
  这里的数据库不一定指mysql，也可以是私有的cache server。

* 主动复制

  主动复制的流程是:
  客户端把请求发送给master服务，master服务请求加上唯一标识，广播发给所有的从服务器

* 整理的一些名词:
    强一致性
    弱一致性
    主动复制
    被动复制
    分布式锁
    对数据进行排序
    更新冲突
